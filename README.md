# Bricks

Сервис для ведения учёта положенных в доме кирпичей. 
Сделан с помощью Django, тесты лежат в /bricks_api/tests/

# Сущности:
**Дом - House**
address - CharField - максимальная длина 255, уникальное поле
date_start - DateField - дата создания обьекта(начала строительства объекта)
date_completed - DateField - дата завершения строительства( когда количество заказанных кирпичей на  данный момент сравнится с количеством кирпичей необходимым для завершения строительства становится равным date_last_load), дефолтное значение None
date_last_load - DateField - дата последней доставки кирпичей, дефолтное значение None
bricks_at_the_moment - IntegerField - количество заказанных кирпичей на данный момент, дефолтное значение 0
total_bricks_required - IntegerField - количество кирпичей необходимое для завершения строительства. Минимальное значение 1
date_updated - DateField - дата последнего обновления объекта
Обязательные поля при создании объекта - address, total_bricks_required
**Задание на кладку кирпичей - Brick_Task**
bricks - IntegerField - количество заказанных кирпичей, которые пойдут на строительство. Минимальное значение 1. Если количество кирпичей + bricks_at_the_moment соответствующего здания превысит total_bricks_required, в поле запишутся только то количество кирпичей, которое пойдет на завершение, оставшиеся (лишние) кирпичи пойдут в excessive_bricks
house_id - ForeignKey - ключ на сущность дома
date_load -  DateField - дата выгрузки кирпичей
excessive_bricks - IntegerField - лишние кирпичи
Обязательные поля при создании объекта - bricks, house_id, date_load
#Методы:
**POST /building/ - создать дом**
Необходимые параметры: address, total_bricks_required 
Пример: {"address": "дом 50 улица Ленина", "total_bricks_required": 300}
**POST /building/{id}/add-bricks/ - создать задание на кладку кирпичей**
id - id дома куда пойдут кирпичи, если дома нет, задание не создастся
Если дом уже построен - задание не создастся
Если date_load меньше date_start - задание не создастся.
Вместе с созданием задания кладки кирпичей, обновляет соответствующий дом. 
Обновляются поля: 
date_completed - при завершении строительства
date_last_load - если дата выгрузки позже чем дата предшествующей наиболее поздней выгрузки
bricks_at_the_moment - увеличивается на bricks
date_updated - проставляется дата изменения объекта
Необходимые параметры: bricks, date_load
Пример: {"bricks": 200, "date_load": "2030-03-10"}
**GET /stats/ - выводит адрес, дату и сколько кирпичей заказано на данный момент с группировкой по дате.**
Предположим для одного дома в день 1 - должны привести 2 кирпича
В день 2 - еще 3 кирпича
В день 3 - две выгрузки по 4 кирпича.
Запрос выведет нарастающий итог как
[ { "house_id__address": "Дом 1",  "date_load": "2050-06-01", "bricks_sum": 2 },
{ "house_id__address": "Дом 1",  "date_load": "2050-06-02", "bricks_sum": 5 },
{ "house_id__address": "Дом 1",  "date_load": "2050-06-03", "bricks_sum": 13}]
